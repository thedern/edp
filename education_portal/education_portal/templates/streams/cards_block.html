
{%  load wagtailimages_tags %}

<!-- blocks.py created a listBlock iterable, 'cards' -->
<!-- loop over iterable -->
<!-- self represents block object as we subclassed the StructBlock, else we would need to to use 'value.cards' -->


<div class="row justify-content-center">
  {%  for card in self.cards %}
    <div class="col-md-6 d-flex align-items-stretch{% if not forloop.first %} mt-4 mt-md-0{% endif %}">
      <div class="card mb-3 text-center">

{#         create appropriate link based on block contents #}
{#         must traverse the DOM, card class contains link class #}
{#         add link open and close tags if and only if urls exist #}

        {% if card.link.url %}<a href="{{ card.link.url }}">{% endif %}
          <picture>
            {%  image card.image fill-570x370 as card_img %}
            <img src="{{  card_img.url }}" alt="{{ card_img.alt }}" class="card-img-top">
          </picture>
        {% if card.link.url %}</a>{% endif %}

        <div class="card-body py-3 px-3">
          {% if card.link.url %}<a href="{{ card.link.url }}">{% endif %}
            <h5 class="card-title">{{  card.title }}</h5>
            {%  if card.text  %}
              <p class="card-text">{{  card.text }}</p>
            {%  endif %}
          {% if card.link.url %}</a>{% endif %}

          <p class="card-text">
            {% if card.link.url %}<a class="btn btn-link d-inline" href="{{ card.link.url }}">{% endif %}
              {{ card.link.link_text }}
            {% if card.link.url %}</a>{% endif %}
          </p>

        </div>
      </div>
    </div>
    {%  endfor %}
</div>














